<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de PDF y envío de pedido por WhatsApp</title>
    <!-- Importar la biblioteca jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<body>

    <!-- Contenido de la página -->
    <h1>Generador de PDF y envío de pedido por WhatsApp</h1>

    <!-- Botón para generar el PDF y enviar el pedido por WhatsApp -->
    <button onclick="enviarPedidoWhatsApp()">Generar PDF y enviar pedido por WhatsApp</button>

    <script>
        // Función para enviar el pedido a WhatsApp con toda la información
        function enviarPedidoWhatsApp() {
            // Obtener la información del cliente y la empresa
            var nombreCliente = ""; // Aquí deberías obtener el nombre del cliente del formulario o del DOM
            var telefonoCliente = ""; // Aquí deberías obtener el teléfono del cliente del formulario o del DOM
            var emailCliente = ""; // Aquí deberías obtener el email del cliente del formulario o del DOM
            var nombreEmpresa = "S24 Seguridad Electrónica";
            var telefonoEmpresa = "3158859744";
            var mailEmpresa = ""; // Aquí deberías obtener el email de la empresa del formulario o del DOM

            // Crear un nuevo documento PDF
            var doc = new jsPDF();

            // Agregar información del cliente y la empresa al PDF
            doc.text(`Cliente:
- Nombre: ${nombreCliente}
- Teléfono: ${telefonoCliente}
- Email: ${emailCliente}`, 10, 10);

            doc.text(`Empresa:
- Nombre: ${nombreEmpresa}
- Teléfono: ${telefonoEmpresa}
- Email: ${mailEmpresa}`, 10, 50);

            // Agregar información de productos al PDF
            var y = 90;
            productosEnCarrito.forEach(producto => {
                doc.text(`- Nombre: ${producto.nombre}
  Descripción: ${producto.descripcion}
  Cantidad: ${producto.cantidad}
  Precio unitario: $${producto.precio.toFixed(2)}
  Precio total: $${(producto.precio * producto.cantidad).toFixed(2)}
  Imagen: ${producto.imagen}`, 10, y);
                y += 60; // Ajustar la posición vertical para el siguiente producto
            });

            // Guardar el documento PDF como un Blob
            var pdfBlob = doc.output("blob");

            // Crear una URL para el Blob
            var pdfUrl = URL.createObjectURL(pdfBlob);

            // Abrir una nueva ventana de WhatsApp con el PDF adjunto
            window.open('https://api.whatsapp.com/send?phone=573158859744&text=¡Hola! Adjunto te envío mi pedido.', '_blank');

            // Liberar la URL del Blob
            URL.revokeObjectURL(pdfUrl);
        }
    </script>

</body>
</html>
